{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 166,
   "id": "f47f737d",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "1264 의 감상문 중 1 페이지 작성완료\n",
      "1263 의 감상문 중 1 페이지 작성완료\n",
      "1262 의 감상문 중 1 페이지 작성완료\n",
      "1261 의 감상문 중 1 페이지 작성완료\n",
      "1260 의 감상문 중 1 페이지 작성완료\n",
      "1259 의 감상문 중 1 페이지 작성완료\n",
      "1258 의 감상문 중 1 페이지 작성완료\n",
      "1257 의 감상문 중 1 페이지 작성완료\n",
      "1255 의 감상문 중 1 페이지 작성완료\n",
      "1254 의 감상문 중 1 페이지 작성완료\n",
      "1252 의 감상문 중 1 페이지 작성완료\n",
      "1251 의 감상문 중 1 페이지 작성완료\n",
      "1250 의 감상문 중 1 페이지 작성완료\n",
      "1249 의 감상문 중 1 페이지 작성완료\n",
      "1248 의 감상문 중 1 페이지 작성완료\n",
      "1247 의 감상문 중 1 페이지 작성완료\n",
      "1246 의 감상문 중 1 페이지 작성완료\n",
      "1245 의 감상문 중 1 페이지 작성완료\n",
      "1244 의 감상문 중 1 페이지 작성완료\n",
      "1243 의 감상문 중 1 페이지 작성완료\n",
      "1242 의 감상문 중 1 페이지 작성완료\n",
      "1241 의 감상문 중 1 페이지 작성완료\n",
      "1240 의 감상문 중 1 페이지 작성완료\n",
      "1239 의 감상문 중 1 페이지 작성완료\n",
      "1238 의 감상문 중 1 페이지 작성완료\n",
      "1237 의 감상문 중 1 페이지 작성완료\n",
      "1236 의 감상문 중 1 페이지 작성완료\n",
      "1235 의 감상문 중 1 페이지 작성완료\n",
      "1234 의 감상문 중 1 페이지 작성완료\n",
      "1233 의 감상문 중 1 페이지 작성완료\n",
      "1232 의 감상문 중 1 페이지 작성완료\n",
      "1230 의 감상문 중 1 페이지 작성완료\n",
      "1229 의 감상문 중 1 페이지 작성완료\n",
      "1227 의 감상문 중 1 페이지 작성완료\n",
      "1226 의 감상문 중 1 페이지 작성완료\n",
      "1225 의 감상문 중 1 페이지 작성완료\n",
      "1224 의 감상문 중 1 페이지 작성완료\n",
      "1223 의 감상문 중 1 페이지 작성완료\n",
      "1222 의 감상문 중 1 페이지 작성완료\n",
      "1221 의 감상문 중 1 페이지 작성완료\n",
      "완료\n"
     ]
    }
   ],
   "source": [
    "import requests\n",
    "from bs4 import BeautifulSoup\n",
    "import re\n",
    "\n",
    "\n",
    "for n in range(1, 2) : #35\n",
    "    url = 'https://konkuk.ac.kr/~shindh/spboard/board.cgi?id=report2&page={}'.format(n)\n",
    "\n",
    "    headers = { 'Accept-Language' : 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7,zh-TW;q=0.6,zh;q=0.5',\n",
    "                'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.127 Safari/537.36',\n",
    "                'Accept-Encoding': 'gzip'\n",
    "    }\n",
    "\n",
    "\n",
    "    raw = requests.get(url=url, headers=headers)\n",
    "    #html = BeautifulSoup(raw.content.decode('euc-kr', 'replace'), 'html.parser') #글자 깨질시 content 로 하면 된다 \n",
    "\n",
    "    html = BeautifulSoup(raw.content.decode('euc-kr', 'replace'), 'html.parser') #글자 깨질시 content 로 하면 된다. 이외 decode로 cp949, euc-kr 로 바꿔 진행\n",
    "\n",
    "\n",
    "    #results = html.select('td')\n",
    "\n",
    "    #print(results[5])\n",
    "\n",
    "    #print(html)\n",
    "\n",
    "    results_2 = html.find_all('a')   #a 태그만 다 가져오기\n",
    "\n",
    "    #print(results_2)\n",
    "\n",
    "\n",
    "    #results_2[100]['href']\n",
    "\n",
    "    for trg in results_2 : \n",
    "        trg_2 = trg['href'] # a 태그 내에 href 만 가져온다.\n",
    "        try :\n",
    "            gul_num = re.search('&gul=(.+?)&', trg_2).group(1)  #글쓴이 번호만 가져오기\n",
    "            #print(gul_num)\n",
    "            url = 'http://konkuk.ac.kr/~shindh/spboard/board.cgi?id=report2&action=view&gul='+ str(gul_num) + f'&page={n}&go_cnt=0'  #URL 화\n",
    "            #print(url)\n",
    "            detail_url = url\n",
    "            headers = { 'Accept-Language' : 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7,zh-TW;q=0.6,zh;q=0.5',\n",
    "            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.127 Safari/537.36',\n",
    "            'Accept-Encoding': 'gzip'\n",
    "            }\n",
    "            \n",
    "            detail_url_raw = requests.get(url=detail_url, headers=headers)\n",
    "            #html = BeautifulSoup(raw.content.decode('euc-kr', 'replace'), 'html.parser') #글자 깨질시 content 로 하면 된다 \n",
    "            detail_html = BeautifulSoup(detail_url_raw.content.decode('euc-kr', 'replace'), 'html.parser') #글자 깨질시 content 로 하면 된다. 이외 decode로 cp949, euc-kr 로 바꿔 진행\n",
    "            \n",
    "            detail_content = detail_html.find('td', {'class' : 'cont'}).text\n",
    "\n",
    "            detail_content_2 = detail_content.split('.') #마침표로 문자열 분리\n",
    "            \n",
    "            f = open('C:/Users/user/raw/konkuk/'+str(n)+'_'+str(gul_num)+'.txt', 'w', encoding='utf-8-sig') #메모장 열기\n",
    "            \n",
    "            for i in detail_content_2 :\n",
    "                last_sentence = str(i) + '.' #끝에 마침표 넣자\n",
    "                last_sentence = last_sentence.replace(\"\\t\", \"\").strip() #빈칸 공백 제거\n",
    "                #print(last_sentence)\n",
    "                #f = open('C:/Users/user/raw/konkuk/'+str(n)+'_'+str(gul_num)+'.txt', 'w', encoding='utf-8') #메모장 열기\n",
    "                f.write(last_sentence + '\\n')  #입력\n",
    "            f.close() #메모장 닫기\n",
    "            \n",
    "            print(str(gul_num)+' 의 감상문 중 ' + str(n) +' 페이지 작성완료')\n",
    "        except :\n",
    "            pass\n",
    "        #print(str(n) +' 페이지 작성완료')\n",
    "    n +=1  #페이지 넘어가면은 또 반복되도록 설정\n",
    "    \n",
    "#url = 'http://konkuk.ac.kr/~shindh/spboard/board.cgi?id=report2&action=view&gul='+ str(gul_num) + f'&page={n}&go_cnt=0'\n",
    "#print(url)\n",
    "#print(html)\n",
    "\n",
    "\n",
    "#<a href=\"http://konkuk.ac.kr/~shindh/spboard/board.cgi?id=report2&amp;action=view&amp;gul=1264&amp;page=1&amp;go_cnt=0\">\n",
    "\n",
    "#TypeError : expected string or bytes-like object 에러\n",
    "# 이는 for 문으로 돌려서 리스트를 문자열로 바꿔서 해결해야 한다.\n",
    "\n",
    "\n",
    "print(\"완료\")\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 105,
   "id": "06c1732b",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "http://konkuk.ac.kr/~shindh/spboard/board.cgi?id=report2&action=view&gul=1264&page=1&go_cnt=0\n",
      "1264\n"
     ]
    }
   ],
   "source": [
    "test = results_2[100]['href']\n",
    "\n",
    "trg_2 = re.search('&gul=(.+?)&', test).group(1)\n",
    "\n",
    "print (test)\n",
    "print(trg_2)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 146,
   "id": "e52dc56e",
   "metadata": {},
   "outputs": [],
   "source": [
    "detail_url = 'http://konkuk.ac.kr/~shindh/spboard/board.cgi?id=report2&action=view&gul=1264&page=1&go_cnt=0'\n",
    "\n",
    "headers = { 'Accept-Language' : 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7,zh-TW;q=0.6,zh;q=0.5',\n",
    "            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.127 Safari/537.36',\n",
    "            'Accept-Encoding': 'gzip'\n",
    "}\n",
    "\n",
    "\n",
    "detail_url_raw = requests.get(url=detail_url, headers=headers)\n",
    "#html = BeautifulSoup(raw.content.decode('euc-kr', 'replace'), 'html.parser') #글자 깨질시 content 로 하면 된다 \n",
    "\n",
    "detail_html = BeautifulSoup(detail_url_raw.content.decode('euc-kr', 'replace'), 'html.parser') #글자 깨질시 content 로 하면 된다. 이외 decode로 cp949, euc-kr 로 바꿔 진행\n",
    "\n",
    "\n",
    "#detail_html = detail_html.find_all('td')\n",
    "#detail_result = detail_html[5] #5 부분만 가져오기\n",
    "\n",
    "#for i in detail_result :\n",
    "    \n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 161,
   "id": "b3438fe2",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "교수님~교생실습 나갔던 기간 중에 못썼던 감상쓰라고 하셨던 것 좀 많이 늦었네요; 교생기간에는 써야하는 줄 몰랐었거든요^^;앞으로 6작품 남았는데 빨리빨리 올릴께요^^*<운영전>은 다른 고대소설들과는 달리 비극적인 결말을 갖고 있다.\n",
      "이루어지지 못한 사랑 때문에 더욱 흥미로웠고 가슴아팠던 작품이다.\n",
      "이 작품을 읽으면서 아름다운 영상과 로맨스에 많은 눈물을 흘리며 보았던 '로미오와 줄리엣'이 떠올랐다.\n",
      "궁녀인 운영은 궁 밖의 사람인 김진사와 사랑에 빠진다.\n",
      "궁녀라는 신분 때문에 왕 이외의 누군가를 사랑할 수 없었던 운영과 김진사의 사랑은 이루어질 수 없는 것이었다.\n",
      "그러한 것을 알고 시작한 사랑.\n",
      "둘은 둘만으로도 행복했다.\n",
      "그러나 그러한 행복한 순간도 잠시, 안평대군이 그 사실을 알게 되고 자책감에 운영은 자결하게 된다.\n",
      "자결한 운영의 장사를 지낸 후 김진사 역시 자결하게 되는데, 둘은 후에 유영의 꿈에 나타나 자신들의 러브스토리를 알려주고 떠난다, 잠에서 깬 유영의 옆에는 그들의 사랑이야기가 담긴 책 한권이 놓여져 있었고 여기서 작품은 끝이 난다.\n",
      "이 작품을 보면서 나는 요즘 즐겨 보는 '불새'라는 드라마가 떠올랐다.\n",
      "세훈(이서진)과 지은(이은주)은 집안환경 등에서 많은 차이를 보였다.\n",
      "애초부터 지은은 부잣집딸 세훈은 가난한 고학생이라는 위치에서 시작했고 이루어지기 힘든 사랑이었다.\n",
      "결국 그들은 지은의 부모의 반대를 무릅쓰고 결혼을 하게 되지만, 서로에게서 많은 차이를 느끼고 결혼 후에도 계속 되는 지은의 부모의 반대에 이혼을 하게 된다.\n",
      "10여년이 흐른 뒤, 우연히 다시 만난 그들은 잊은 줄만 알았던 서로에게 아직도 사랑의 감정이 남아있음에 안타까워한다.\n",
      "그들에게는 각자의 연인이 있었으므로.\n",
      "또 사고였기는 했지만, 10여년전 떠나는 세훈을 잡기 위해 가는 지은을 막으려다 지은의 아버지가 죽게 되고 그 후 지은의 집안은 몰락했다.\n",
      "이런 것을 모두 세훈의 책임이라고 보고, 그들은 사랑하지만 현실이라는 벽에 좌절한다.\n",
      "아직 드라마가 끝나지 않았기에 결론을 알 수 없다.\n",
      "하지만 이 드라마를 통해 나는 간접 경험을 하고 있는 중이다.\n",
      "안타까움과 가슴 아픈 사랑이라는 것에 눈물지으며, 대체 사랑이라는 것이 얼마나 대단한 것일까 하는 생각을 한다.\n",
      "사랑을 겪어 보지 못한 것은 아니지만, 힘든 사랑인 줄 알면서 시작하게 될 만큼, 이성적인 인간이 무모해질만큼 사랑의 힘은 대단한 것임에 틀림없다.\n",
      "하지만 나는 이러한 사랑을 하고 싶지 않다.\n",
      "간접 경험만으로도 족하다.\n",
      "느끼기만 하면서도 슬프고 가슴 아픈데 현실에서 그렇게 된다면.\n",
      ".\n",
      "그런 일은 상상하고 싶지도 않다.\n",
      "<수성지>는 가전체 형식의 소설이다.\n",
      "고등학교 수업시간에 <공방전>, <국순전> 등의 작품을 통해 가전체 작품을 몇 번 접해보았지만, 교훈적인 내용을 담고 있어서 그런지 러브스토리를 주로 하는 다른 작품보다 별로 흥미롭지 않았다.\n",
      "이 작품은 인간의 심성인 천군이 수성(근심의 세계)을 물리치고 명랑함을 되찾는다는 이야기로 인간의 모든 마음이 어느 한쪽에 치우치지 않고 조화를 이루어야 한다는 교훈을 전달해준다.\n",
      "어느 하나에만 집착하지 말고 조화로운 사고를 갖고 삶을 영위하도록 노력해야 겠다고 생각하게 해주는 유익한 작품이었다.\n",
      "<상사동기>는 <영영전>이라고도 불린다.\n",
      "영영이라는 여자주인공의 이름을 딴 제목이다.\n",
      "선조대왕 때, 당대의 모범적이고 완벽한 선비 김생은 영영이라는 회산군 댁 시녀를 우연히 보게 되고, 그녀에게 한눈에 반해 버린다.\n",
      "하지만, 영영의 신분이 회산군 댁의 시녀였기에 이들은 비밀스런 하룻밤의 만남으로 모든 것을 묻어버린 채 서로 그리워해야 했다.\n",
      "시간이 흐른 후, 김생이 과거에서 장원을 하고, 회산군이 죽은 후에야 회산군의 부인에게 말하여 영영을 맞아들일 수가 있었다.\n",
      "영영을 맞아들인 후에 김생은 그 후로 공명을 영원히 사양하고, 다른 여자를 취하지 아니하고 영영과 더불어 살게된다.\n",
      "이 작품은 운영전과 비슷한 구조를 갖는다.\n",
      "김진사와 운영처럼 김생과 영영 역시 현실가능성이 없는 사랑에 빠진다는 점에서 말이다.\n",
      "지금도 없다고 볼 수는 없지만 예전에는 신분의 제약이 무척 강했기 때문에 그러한 문제로 현실에서 사랑이 이루어지지 못하는 사람이 많았을 것이다.\n",
      "운영전의 김진사와 운영 역시 이러한 현실에 대항하고자 했으나 결국에는 이루지 못하고 죽게 된다.\n",
      "하지만 상사동기의 김생은 이러한 장애를 극복하고자 노력했고 결국에 영영과 행복한 삶을 살게 된다.\n",
      "운영전이 그 당시 현실을 사실적으로 반영했다고 한다면 상사동기는 당시 사람들의 욕구를 이루어준 작품이다.\n",
      "개인적으로 나는 <상사동기>보다는 <운영전>이 더 큰 감동을 준 작품이라고 생각한다.\n",
      "<최치원전>을 읽고서도 느꼈지만, 나는 좀 이중적인 것 같다.\n",
      "현실에서 내가 그렇게 되기는 싫지만, 그런 내용을 담은 작품에 감동을 받고 더 선호하기 때문이다.\n",
      "조금 전에도 세훈과 지은의 이루어질 수 없는 사랑에 안타까워하면서 '불새'를 봤다.\n",
      "둘의 사랑이 이루어지면 좋겠지만, 서로를 가슴에 묻으며 이루어지지 않는 사랑도 멋질 것 같고.\n",
      ".\n",
      ".\n",
      "드라마가 어떻게 종영될 지 호기심이 생겨, 애청하는 드라마이지만 빨리 끝났으면 하는 생각도 한다.\n",
      "얼마 전에 '발리에서 생긴 일'이라는 드라마에서는 삼각관계였던 애정의 주인공 세 명이 모두 죽으면서 끝이 나서 드라마의 팬들의 거센 항의를 받았다.\n",
      "하지만 그 드라마의 작가가 나처럼 이상적으로는 아름다운 사랑을 꿈꿨기 때문이라는 생각에 나는 공감이 간다.\n",
      ".\n"
     ]
    }
   ],
   "source": [
    "for i in detail_content_2 :\n",
    "    last_sentence = str(i) + '.' #끝에 마침표 넣자\n",
    "    last_sentence = last_sentence.replace(\"\\t\", \"\").strip()\n",
    "    print(last_sentence)\n",
    "    #print(last_sentence)\n",
    "    #print(last_sentence)\n",
    "    #f = open('C:/Users/user/raw/konkuk/'+str(n)+'_'+str(gul_num)+'.txt', 'w', encoding='utf-8') #메모장 열기\n",
    "    #f.write(last_sentence + '\\n')  #입력"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "1fe66ec2",
   "metadata": {},
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3 (ipykernel)",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.9.7"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 5
}
